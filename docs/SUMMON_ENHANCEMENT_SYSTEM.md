# 召唤兽强化系统设计文档 (洗练 & 提纯)

## 1. 概述

### 1.1. 核心思想

本系统是在现有完善的召唤兽成长、技能和融合系统之上的高级功能延伸。其核心思想是：针对召唤兽培养过程中最不可控的两大随机因素——**天生技能组**和**融合技能继承**——为玩家提供一个高成本、高回报的定向优化方案，将玩家的培养体验从"听天由命"向"精心规划"转变。

### 1.2. 目标

*   为已成型的、高资质的召唤兽提供"后悔药"，优化其技能组合。
*   为复杂的融合系统提供一个"技能保底"机制，降低毕业宠物的合成难度，提升玩家的正向反馈。
*   创造新的后期玩法循环和资源消耗点，提升稀有道具的价值和玩家的长期追求。

---

## 2. 功能一：召唤兽洗练 (Refinement)

### 2.1. 目标

解决"获得了极品召唤兽，但天生技能不理想"的核心痛点。

### 2.2. 核心玩法

玩家使用特定稀有道具，对一只召唤兽进行"洗练"。洗练后，该召唤兽的核心价值（如等级、资质、成长、五行、性格）将完全保留，仅其天生技能池被重置，并根据预设的规则重新随机生成。

### 2.3. 实现细节

*   **新道具**:
    *   名称："易筋丹" 或 "菩提果"。
    *   来源：高级任务奖励、稀有掉落、商城等。
    *   描述："可重塑召唤兽的技能根基，但不会影响其修为和资质。"

*   **新UI**:
    *   创建一个新的模态框 `SummonRefinementModal.jsx`。
    *   界面包含：一个放置召唤兽的槽位、一个放置"易筋丹"的槽位、一个"洗练"按钮，以及一个清晰展示洗练前后技能变化的对比区域。

*   **核心逻辑**:
    *   在 `Summon.js` 中添加一个新方法 `refineSkills()`。
    *   该方法被调用时，会清空当前的 `skillSet`。
    *   然后，它会参照 `src/config/summon/allSummons.json` 中该召唤兽的模板数据，特别是其中定义的"必带技能"和"可选技能池"。
    *   根据预设的技能生成规则（例如，1个必带技能 + 从可选池中随机抽取N个），重新填充 `skillSet`。
    *   `SummonManager.js` 需要添加一个调用 `refineSkills` 的方法，并处理消耗"易筋丹"的逻辑。

### 2.4. 玩家价值

*   **分离追求点**: 将"个体值"（资质成长）和"技能组"这两个核心追求点分离开来，允许玩家专注于一项进行优化。
*   **资产保值**: 为玩家投入了大量资源的"极品"召唤兽提供了保障，避免因技能不佳而导致价值暴跌。

---

## 3. 功能二：技能提纯 (Purification)

### 3.1. 目标

解决"我想把A的这个神技遗传给B，但融合继承率太看脸了"的终极痛点。

### 3.2. 核心玩法 (两阶段)

这是一个两步过程，旨在让玩家可以将一个技能100%地从一只召唤兽转移到另一只召唤兽的融合结果上。

#### 3.2.1. 阶段一：技能萃取 (Skill Extraction)

玩家消耗一只召唤兽（材料宠）和一颗"空白魂石"，从该召唤兽的技能池中选择一个技能，将其"萃取"出来。萃取后，材料宠消失，玩家得到一枚封装着特定技能的"技能魂石"。

#### 3.2.2. 阶段二：技能注入 (Skill Infusion)

在进行召唤兽融合时，玩家除了可以放入主副召唤兽和常规辅助材料外，还可以额外放入一枚"技能魂石"。在最终的融合结果中，这枚魂石中封存的技能将被**必定继承**。

### 3.3. 实现细节

*   **新道具**:
    *   **空白魂石 (Blank Soulstone)**: 用于承载技能的容器。
    *   **技能魂石 (Skill Soulstone)**: 封存了特定技能的魂石，其物品`id`或`meta`数据中需要包含`skillId`信息。

*   **新UI**:
    *   需要一个"技能萃取"界面 (`SkillExtractionModal.jsx`)。
    *   改造现有的融合界面 `SummonFusionModal.jsx`，增加一个用于放置"技能魂石"的特殊槽位。

*   **逻辑变更**:
    *   创建一个新的管理器 `SkillExtractionManager.js` 或在 `InventoryManager.js` 中扩展逻辑，用于处理技能萃取过程（消耗召唤兽和空白魂石，生成技能魂石）。
    *   修改 `SummonFusionManager.js` 中的 `calculateInheritedSkills` 和 `performFusion` 方法：
        *   如果检测到融合材料中包含了"技能魂石"，则将该魂石中的技能预先放入"必中技能列表"。
        *   该技能将100%出现在最终结果中，并占据一个继承名额。
        *   其余的技能再按照原有的、复杂的继承规则进行计算。

### 3.4. 玩家价值

*   **提供保底**: 为高风险的融合玩法提供了确定性的"保底"手段，是解决核心随机性痛点的终极方案。
*   **创造新玩法循环**: 催生出新的玩家行为，如：专门捕捉/购买拥有特定技能的"材料宠"用于萃取，极大地丰富了游戏的后期策略和市场生态。
*   **提升成就感**: 通过精心规划和努力，最终合成出拥有完美技能组合的"毕业级"召唤兽，将为玩家带来巨大的满足感和成就感。 